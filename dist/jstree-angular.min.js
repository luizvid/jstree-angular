/*!
 jsTree-Angular
 (c) 2015 Luiz Fernando Vid <luizvid@gmail.com>
 License: MIT
 Version 1.2
 */
if(angular.isUndefined(jsTreeAngular))var jsTreeAngular=angular.module("jsTreeAngular",[]);if(function(e){e.factory("jsTreeAngular",["$rootScope",function(e){"use strict";this.moved_nodes=[],this.selected_node=void 0,this.available_plugins=void 0;var n=function(){};this.setMovedNodes=function(n){o("setMovedNodes","dnd"),s(n.node.id,this)!==!1?t(n,this):r(n,this),e.$broadcast("jsTreeAngular:moved",this.moved_nodes)},this.getMovedNodes=function(){return this.moved_nodes},this.cleanMovedNodes=function(){this.moved_nodes=[]},this.undoLastMove=function(){this.moved_nodes.unshift()},this.setSelectedNode=function(n){this.selected_node=n,e.$broadcast("jsTreeAngular:selected",this.selected_node)},this.getSelectedNode=function(e){return this.selected_node=e},this.clearSelectedNode=function(){this.selected_node=void 0},this.refreshTree=function(){this.clearSelectedNode(),this.cleanMovedNodes(),n()},this._refreshTree=function(e){n=e};var t=function(e,n){var t=s(e.node.id,n);if(e.parent==n.moved_nodes[t].old_parent)return void n.moved_nodes.splice(t,1);var o={id:e.node.id,parent:e.parent,old_parent:n.moved_nodes[t].old_parent,position:e.position};n.moved_nodes[t]=o},o=function(e,n){},r=function(e,n){var t={id:e.node.id,parent:e.parent,old_parent:e.old_parent,position:e.position};n.moved_nodes.push(t)},s=function(e,n){for(var t=n.moved_nodes.length,o=0;t>o;o++)if(n.moved_nodes[o].id==e)return o;return!1};return this}])}(jsTreeAngular),angular.isUndefined(jsTreeAngular))var jsTreeAngular=angular.module("jsTreeAngular",[]);!function(e){e.directive("jsTree",["$timeout","jsTreeAngular",function(e,n){"use strict";function t(t,d){if(angular.isUndefined(d.jstree))return void d.append('<p style="color: red; font-size: 12px; background-color: rgba(255, 64, 39, 0.09)">Something went wrong, jsTree looks like it was not loaded.</p>');if(o=t.plugins?i(t.plugins.split(",")):[],r=t.options?t.options:[],s={plugins:o},void 0!==t.options)for(var a in r)("core"===a||o.indexOf(a))&&r.hasOwnProperty(a)&&(s[a]=r[a]);d.jstree(s),t.$watch("model",function(e){null!=e&&(d.jstree(!0).settings.core.data=e,n.refreshTree())},!0);var u=!1;t.$watch("search",function(n){l("search"),angular.isUndefined(n)||-1==plugins.indexOf("search")||(u&&e.cancel(u),u=e(function(){d.jstree(!0).search(n)},250))}),d.on("move_node.jstree",function(e,t){t.parent!=t.old_parent&&n.setMovedNodes(t)}),d.on("dblclick.jstree",function(e,t){if(e.target.parentNode.id){var t={id:e.target.parentNode.id,parent:e.target.parentNode.parentNode.parentNode.id};n.setSelectedNode(t)}}),n._refreshTree(function(){d.jstree(!0).refresh(!1,!0)});var l=function(e){console.log(d.jstree(!0).plugins)}}var o=[],r=[],s={},i=function(e){for(var n in e)e[n]=$.trim(e[n]);return e};return{restrict:"EA",scope:{model:"=treeModel",search:"=treeSearch",plugins:"@treePlugins",options:"=treeOptions"},link:t}}])}(jsTreeAngular);
//# sourceMappingURL=jstree-angular.min.js.map