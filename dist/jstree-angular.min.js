/*!
 jsTree-Angular
 (c) 2015 Luiz Fernando Vid <luizvid@gmail.com>
 License: MIT
 Version 1.1
 */
var jsTree=angular.module("jsTreeAngular",[]);!function(e){e.factory("jsTreeFactory",["$rootScope",function(e){"use strict";this.moved_nodes=[],this.selected_node=void 0;var t=function(){};this.setMovedNodes=function(t){r(t.node.id,this)!==!1?n(t,this):o(t,this),e.$broadcast("jsTreeService:moved",this.moved_nodes)},this.getMovedNodes=function(){return this.moved_nodes},this.cleanMovedNodes=function(){this.moved_nodes=[]},this.undoLastMove=function(){this.moved_nodes.unshift()},this.setSelectedNode=function(t){this.selected_node=t,e.$broadcast("jsTreeService:selected",this.selected_node)},this.getSelectedNode=function(e){return this.selected_node=e},this.clearSelectedNode=function(){this.selected_node=void 0},this.refreshTree=function(){this.clearSelectedNode(),this.cleanMovedNodes(),t()},this._refreshTree=function(e){t=e};var n=function(e,t){var n=r(e.node.id,t);if(e.parent==t.moved_nodes[n].old_parent)return void t.moved_nodes.splice(n,1);var o={id:e.node.id,parent:e.parent,old_parent:t.moved_nodes[n].old_parent,position:e.position};t.moved_nodes[n]=o},o=function(e,t){var n={id:e.node.id,parent:e.parent,old_parent:e.old_parent,position:e.position};t.moved_nodes.push(n)},r=function(e,t){for(var n=t.moved_nodes.length,o=0;n>o;o++)if(t.moved_nodes[o].id==e)return o;return!1};return this}])}(jsTree),function(e){e.directive("jsTree",["$timeout","jsTreeFactory",function(e,t){"use strict";function n(n,c){if(r=n.plugins?d(n.plugins.split(",")):[],i=n.options?n.options:[],s={plugins:r},void 0!==n.options)for(o in i)("core"===o||r.indexOf(o))&&i.hasOwnProperty(o)&&(s[o]=i[o]);c.jstree(s),n.$watch("model",function(e){null!=e&&(c.jstree(!0).settings.core.data=e,t.refreshTree())},!0),c.on("move_node.jstree",function(e,n){n.parent!=n.old_parent&&t.setMovedNodes(n)}),c.on("dblclick.jstree",function(e){if(e.target.parentNode.id){var n={id:e.target.parentNode.id,parent:e.target.parentNode.parentNode.parentNode.id};t.setSelectedNode(n)}});var a=!1;n.$watch("search",function(t){angular.isUndefined(t)||-1==r.indexOf("search")||(a&&e.cancel(a),a=e(function(){c.jstree(!0).search(t)},250))}),t._refreshTree(function(){c.jstree(!0).refresh(!1,!0)})}var o,r=[],i=[],s={},d=function(e){for(o in e)e[o]=$.trim(e[o]);return e};return{restrict:"EA",scope:{model:"=treeModel",search:"=treeSearch",plugins:"@treePlugins",options:"=treeOptions"},link:n}}])}(jsTree);
//# sourceMappingURL=jstree-angular.min.js.map