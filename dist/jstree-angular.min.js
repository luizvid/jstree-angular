/*!
 jsTree-Angular
 (c) 2015 Luiz Fernando Vid <luizvid@gmail.com>
 License: MIT
 Version 1.1
 */
var jsTree=angular.module("jsTreeAngular",[]);!function(e){e.factory("jsTreeService",["$log","$rootScope",function(e,t){"use strict";return this.moved_nodes=[],this.selected_node=void 0,this.cbRefreshTree=function(){},this.cbUndoMove=function(){},this.setMovedNodes=function(e){this._alreadyMoved(e.node.id)!==!1?this._updateMove(e):this._newMove(e),t.$broadcast("jsTreeService:moved",this.moved_nodes)},this._updateMove=function(e){var t=this._alreadyMoved(e.node.id);if(e.parent==this.moved_nodes[t].old_parent)return void this.moved_nodes.splice(t,1);var o={id:e.node.id,parent:e.parent,old_parent:this.moved_nodes[t].old_parent,position:e.position};this.moved_nodes[t]=o},this._newMove=function(e){var t={id:e.node.id,parent:e.parent,old_parent:e.old_parent,position:e.position};this.moved_nodes.push(t)},this.getMovedNodes=function(){return this.moved_nodes},this.cleanMovedNodes=function(){this.moved_nodes=[]},this.undoLastMove=function(){this.moved_nodes.unshift()},this.setSelectedNode=function(e){this.selected_node=e,t.$broadcast("jsTreeService:selected",this.selected_node)},this.getSelectedNode=function(e){return this.selected_node=e},this.clearSelectedNode=function(){this.selected_node=void 0},this.refreshTree=function(){this.clearSelectedNode(),this.cleanMovedNodes(),this.cbRefreshTree()},this._refreshTree=function(e){this.cbRefreshTree=e},this.undoMove=function(){this.undoLastMove(),this.cbUndoMove()},this._undoMove=function(e){this.cbUndoMove=e},this._alreadyMoved=function(e){for(var t=this.moved_nodes.length,o=0;t>o;o++)if(this.moved_nodes[o].id==e)return o;return!1},this}])}(jsTree),function(e){e.directive("jsTree",["$timeout","jsTreeService",function(e,t){"use strict";function o(o,r){if(s=o.plugins?o.plugins.split(","):[],i=o.options?o.options:[],d={plugins:s},void 0!==o.options)for(n in i)("core"===n||s.indexOf(n))&&i.hasOwnProperty(n)&&(d[n]=i[n]);console.log(d),r.jstree(d),o.$watch("model",function(e){null!=e&&(r.jstree(!0).settings.core.data=e,t.refreshTree())},!0),r.on("move_node.jstree",function(e,o){o.parent!=o.old_parent&&t.setMovedNodes(o)}),r.on("dblclick.jstree",function(e){if(e.target.parentNode.id){var o={id:e.target.parentNode.id,parent:e.target.parentNode.parentNode.parentNode.id};t.setSelectedNode(o)}});var c=!1;o.$watch("search",function(t){angular.isUndefined(t)||(c&&e.cancel(c),c=e(function(){r.jstree(!0).search(t)},250))}),t._refreshTree(function(){r.jstree(!0).refresh(!1,!0)}),t._undoMove(function(){})}var n,s=[],i=[],d={};return{restrict:"EA",scope:{model:"=treeModel",search:"=treeSearch",plugins:"@treePlugins",options:"=treeOptions"},link:o}}])}(jsTree);
//# sourceMappingURL=../dist/jstree-angular.min.js.map