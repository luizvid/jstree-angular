/*!
 jsTree-Angular
 (c) 2015 Luiz Fernando Vid <luizvid@gmail.com>
 License: MIT
 Version 1.1.1
 */
if(angular.isUndefined(jsTreeAngular))var jsTreeAngular=angular.module("jsTreeAngular",[]);if(function(e){e.factory("jsTreeAngular",["$rootScope",function(e){"use strict";var n=[],r=void 0,t=void 0,o=function(){};this.setMovedNodes=function(r){a(r.node.id,this)!==!1?i(r):d(r),e.$broadcast("jsTreeAngular:moved",n)},this.getMovedNodes=function(){return s("dnd","getMovedNodes")?void 0:n},this.cleanMovedNodes=function(){s("dnd","cleanMovedNodes")||(n=[])},this.undoLastMove=function(){s("dnd","undoLastMove")||n.unshift()},this.setSelectedNode=function(n){r=n,e.$broadcast("jsTreeAngular:selected",r)},this.getSelectedNode=function(e){return r=e},this.clearSelectedNode=function(){r=void 0},this._setActivePlugins=function(e){t=e},this.refreshTree=function(){this.clearSelectedNode(),this.cleanMovedNodes(),o()},this._refreshTree=function(e){o=e};var i=function(e){var r=a(e.node.id);if(e.parent==n[r].old_parent)return void n.splice(r,1);var t={id:e.node.id,parent:e.parent,old_parent:n[r].old_parent,position:e.position};n[r]=t},s=function(e,n){return-1===t.indexOf(e)?(console.error(e+" plugin is needed for "+n+" to work. Add '"+e+"' with tree-plugins."),!1):void 0},d=function(e){var r={id:e.node.id,parent:e.parent,old_parent:e.old_parent,position:e.position};n.push(r)},a=function(e){for(var r=n.length,t=0;r>t;t++)if(n[t].id==e)return t;return!1};return this}])}(jsTreeAngular),angular.isUndefined(jsTreeAngular))var jsTreeAngular=angular.module("jsTreeAngular",[]);!function(e){e.directive("jsTree",["$timeout","jsTreeAngular",function(e,n){"use strict";function r(r,a){if(angular.isUndefined(a.jstree))throw a.append('<p style="color: red; font-size: 12px; background-color: rgba(255, 64, 39, 0.09)">Something went wrong, <strong>jsTree looks like was not loaded. Obtain more information by clicking <a href="//github.com/luizvid/jstree-angular/blob/master/README.md#quick-start" style="color: red; font-decoration: underline;" target="_blank">here</a>.</strong></p>'),new Error("Something went wrong, jsTree looks like was not loaded.");if(t=r.id?d(r.id):"default-tree",o=r.plugins?d(r.plugins.split(",")):[],i=r.options?r.options:[],s={plugins:o},void 0!==r.options)for(var l in i)("core"===l||o.indexOf(l))&&i.hasOwnProperty(l)&&(s[l]=i[l]);if(a.jstree(s,"test"),angular.isUndefined(a.jstree(!0).settings.massload))return void a.append('<p style="color: red; font-size: 12px; background-color: rgba(255, 64, 39, 0.09)">Something went wrong, <strong>jsTree seems outdated. Update your version to 3.1.0 or later by clicking <a href="//github.com/vakata/jstree/releases" style="color: red; font-decoration: underline;" target="_blank">here</a>.</strong></p>');r.$watch("model",function(e){null!=e&&(a.jstree(!0).settings.core.data=e,n.refreshTree())},!0);var u=!1;r.$watch("search",function(n){c("search","search")||angular.isUndefined(n)||-1==o.indexOf("search")||(u&&e.cancel(u),u=e(function(){a.jstree(!0).search(n)},250))}),a.on("move_node.jstree",function(e,r){c("dnd","move_node")||r.parent!=r.old_parent&&n.setMovedNodes(r)}),a.on("dblclick.jstree",function(e,r){if(e.target.parentNode.id){var r={id:e.target.parentNode.id,parent:e.target.parentNode.parentNode.parentNode.id};n.setSelectedNode(r)}}),n._refreshTree(function(){a.jstree(!0).refresh(!1,!0)});var c=function(e,n){return-1===a.jstree(!0).settings.plugins.indexOf(e)?(console.error(e+" plugin is needed for "+n+" to work. Add '"+e+"' with tree-plugins."),!0):void 0};n._setActivePlugins(a.jstree(!0).settings.plugins)}var t,o=[],i=[],s={},d=function(e){if("string"==typeof e)e=$.trim(e);else for(var n in e)e[n]=$.trim(e[n]);return e};return{restrict:"EA",scope:{id:"@treeId",model:"=treeModel",search:"=treeSearch",plugins:"@treePlugins",options:"=treeOptions"},link:r}}])}(jsTreeAngular);
//# sourceMappingURL=jstree-angular.min.js.map